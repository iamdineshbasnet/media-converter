!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("MediaConverter",[],t):"object"==typeof exports?exports.MediaConverter=t():e.MediaConverter=t()}(this,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;class i{static async fileToBase64(e,t={}){const i={...this.DEFAULT_OPTIONS,...t};if(i.validateContent&&!this.isValidMimeType(e.type,i.allowedMimeTypes))throw new Error(`Unsupported file type: ${e.type}. Allowed types: ${i.allowedMimeTypes.join(", ")}`);const o=e.size/1048576;if(i.maxFileSizeMB&&o>i.maxFileSizeMB)throw new Error(`File size (${o.toFixed(2)}MB) exceeds maximum allowed size of ${i.maxFileSizeMB}MB`);return new Promise(((t,i)=>{const r=new FileReader;r.onload=()=>{t({data:r.result,mimeType:e.type,filename:e.name,sizeInMB:o})},r.onerror=e=>i(new Error(`File reading failed: ${e}`)),r.readAsDataURL(e)}))}static base64ToFile(e,t,i,o={}){const r={...this.DEFAULT_OPTIONS,...o};if(r.validateContent&&!this.isValidMimeType(i,r.allowedMimeTypes))throw new Error(`Unsupported MIME type: ${i}`);try{const o=e.includes(",")?e.split(",")[1]:e,n=atob(o),a=[];for(let e=0;e<n.length;e+=this.CHUNK_SIZE){const t=n.slice(e,e+this.CHUNK_SIZE),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);a.push(i)}const s=new Blob(a,{type:i}),l=s.size/1048576;if(r.maxFileSizeMB&&l>r.maxFileSizeMB)throw new Error(`Generated file exceeds maximum size limit of ${r.maxFileSizeMB}MB`);return new File([s],t,{type:i})}catch(e){if(e instanceof Error)throw new Error(`Base64 conversion failed: ${e.message}`);throw new Error("Base64 conversion failed with unknown error")}}static async urlToFile(e,t,i={},o){const r={...this.DEFAULT_OPTIONS,...i};try{const i=await fetch(e);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const n=i.headers.get("content-type")||"application/octet-stream";if(r.validateContent&&!this.isValidMimeType(n,r.allowedMimeTypes))throw new Error(`Unsupported content type: ${n}`);const a=i.body.getReader(),s=+(i.headers.get("content-length")||"0");let l=0;const d=[];for(;;){const{done:e,value:t}=await a.read();if(e)break;d.push(t),l+=t.length,o&&s&&o(l/s*100)}const c=new Blob(d,{type:n}),p=t||this.extractFilenameFromUrl(e),m=c.size/1048576;if(r.maxFileSizeMB&&m>r.maxFileSizeMB)throw new Error(`Downloaded file exceeds maximum size limit of ${r.maxFileSizeMB}MB`);return new File([c],p,{type:n})}catch(e){if(e instanceof Error)throw new Error(`URL conversion failed: ${e.message}`);throw new Error("URL conversion failed with unknown error")}}static fileToUrl(e){const t=URL.createObjectURL(e);return{url:t,cleanup:()=>URL.revokeObjectURL(t)}}static getBase64Size(e){return 3*(e.includes(",")?e.split(",")[1]:e).length/4/1048576}static isValidMimeType(e,t){return t.some((t=>e===t||e.startsWith(t.split("/")[0]+"/")))}static extractFilenameFromUrl(e){try{return new URL(e).pathname.split("/").pop()||"downloaded-file"}catch(e){return"downloaded-file"}}}i.DEFAULT_OPTIONS={maxFileSizeMB:50,validateContent:!0,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","audio/mpeg","audio/wav","audio/ogg","application/pdf"]},i.CHUNK_SIZE=512,t.default=i,"undefined"!=typeof window&&(window.MediaConverter=i)})(),e.default})()));